# üß© sbgen ‚Äî –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π Sing-box

`sbgen` ‚Äî —ç—Ç–æ —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è **–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ JSON-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π Sing-box** –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤ –∏ YAML-–ø—Ä–æ—Ñ–∏–ª–µ–π.  
–û–Ω–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–µ–∫—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (`route.rules`) –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–ø–∏—Å–∫–æ–≤ –¥–æ–º–µ–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üß± –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏ `%%tid:inbound%%` –∏ `%%FINAL%%`.
- üßæ –°–±–æ—Ä–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏–∑:
  - inline-—Å–ø–∏—Å–∫–æ–≤ (`patterns:`),
  - –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤ (`includes:`),
  - —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (`- "example.com"`).
- üîÑ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ YAML.
- üéØ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö `out:` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `out: [proxy, out-alt]`), —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –µ—Å—Ç—å –≤ —à–∞–±–ª–æ–Ω–µ.
- üóÇÔ∏è –ü–æ–∏—Å–∫ include-—Ñ–∞–π–ª–æ–≤ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É: `item_dir ‚Üí base_dir ‚Üí --base-dir ‚Üí cwd`.
- üß© –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `base_dir`, `default_direct`, `direct`, `blocked` –≤ –ø—Ä–æ—Ñ–∏–ª—è—Ö YAML.
- üßº –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ "–≤–∏—Å—è—á–∏—Ö" –∑–∞–ø—è—Ç—ã—Ö –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ JSON.

---

## ‚öôÔ∏è –§–æ—Ä–º–∞—Ç —à–∞–±–ª–æ–Ω–∞

–®–∞–±–ª–æ–Ω (`.tpl` –∏–ª–∏ `.json`) ‚Äî JSON-—Ñ–∞–π–ª —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏:

```json
{
  "route": {
    "rules": [
      { "action": "hijack-dns", "port": [53] },
      %%russia:in-tun%%,
      %%europe:in-tun%%
    ],
    "final": "%%FINAL%%"
  }
}
```

---

## üß© –§–æ—Ä–º–∞—Ç YAML-–ø—Ä–æ—Ñ–∏–ª—è

```yaml
russia:
  base_dir: "./lists"
  default_direct: true
  lists:
    - name: world
      out: [out-global, proxy]
      includes: ["world.list"]
      patterns: ["example.org"]
    - name: region
      out: out-alt
      includes: ["region.list"]
  direct:
    - "mysite.net"
    - includes: ["direct.list"]
    - patterns: [".home.arpa", "lan.local"]
  blocked:
    - "*.trackers.com"
    - includes: ["block.list"]
```

–§–∞–π–ª—ã `.list` ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã:

```text
# –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
example.com
*.cdnservice.io
```

–ü—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.

---

## üß∞ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
sbgen <template.tpl> <config.yml> [more.yml...] [options]
```

### –ü—Ä–∏–º–µ—Ä—ã

```bash
sbgen singbox.tpl russia.yml > out.json
sbgen singbox.tpl profiles.yml --base-dir /opt/config/lists > out.json
sbgen singbox.tpl profiles.yml --debug
```

---

## üß© –û–ø—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

| –û–ø—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------|
| `--base-dir PATH` | –ì–ª–æ–±–∞–ª—å–Ω—ã–π –±–∞–∑–æ–≤—ã–π –ø—É—Ç—å –¥–ª—è `includes:` (–µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ YAML) |
| `--debug` | –í–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ `stderr` |
| `<template>` | JSON-—à–∞–±–ª–æ–Ω —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏ |
| `<config.yml ...>` | –û–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ YAML-–ø—Ä–æ—Ñ–∏–ª–µ–π |

---

## üîç –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª ‚Üí –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (—Ñ–∞–π–ª –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è).
- –û—à–∏–±–∫–∞ JSON ‚Üí –≤—ã–≤–æ–¥–∏—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏.
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π `out` ‚Üí –Ω–µ –æ—à–∏–±–∫–∞, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è.
- –ü—Ä–∏ `--debug` –≤–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ –∑–∞–≥—Ä—É–∑–æ–∫ –∏ –∑–∞–º–µ–Ω.

---

## üìÇ –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞

```
project/
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ singbox.tpl
‚îú‚îÄ‚îÄ profiles/
‚îÇ   ‚îú‚îÄ‚îÄ russia.yml
‚îÇ   ‚îî‚îÄ‚îÄ europe.yml
‚îú‚îÄ‚îÄ lists/
‚îÇ   ‚îú‚îÄ‚îÄ world.list
‚îÇ   ‚îú‚îÄ‚îÄ direct.list
‚îÇ   ‚îî‚îÄ‚îÄ block.list
‚îî‚îÄ‚îÄ out.json
```

---

¬© 2025 ‚Ä¢ `sbgen` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è Sing-box.
